{
  "$schema": "https://opencode.ai/config.json",

  // Default permissions — all gated behind approval
  "permission": {
    "bash": "ask",
    "edit": "ask",
    "webfetch": "ask"
  },

  // Specialized agent profiles
  "agents": {
    // Channel intake: restricted agent for processing inbound channel requests.
    // No shell, no editing, no web — read-only memory only.
    "channel-intake": {
      "description": "Validates, summarizes, and dispatches inbound channel requests",
      "permission": {
        "bash": "deny",
        "edit": "deny",
        "webfetch": "deny"
      },
      "skills": ["skills/ChannelIntake.SKILL.md", "skills/RecallFirst.SKILL.md"]
    }
  },

  // MCP transport kept for optional external tooling; runtime memory uses
  // the HTTP API plugin below (OPENPALM_MEMORY_MODE=api disables this path).
  "mcp": {
    "openmemory": {
      "enabled": false,
      "transport": {
        "type": "sse",
        "url": "http://openmemory:8765/mcp/gateway/sse/default-user"
      }
    }
  },

  "plugin": [
    "./.opencode/plugins/policy-and-telemetry.ts",
    "./.opencode/plugins/openmemory-http.ts"
  ]
}
