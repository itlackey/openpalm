{"version":3,"file":"_server.ts-9pdOUUSf.js","sources":["../../../.svelte-kit/adapter-node/entries/endpoints/setup/status/_server.ts.js"],"sourcesContent":["import { u as unauthorizedJson, j as json } from \"../../../../chunks/json.js\";\nimport { a as getSetupManager } from \"../../../../chunks/init.js\";\nimport { c as readSecretsEnv, e as readRuntimeEnv, r as readDataEnv } from \"../../../../chunks/env-helpers.js\";\nimport { i as isLocalRequest } from \"../../../../chunks/auth.js\";\nconst GET = async ({ locals, request }) => {\n  const setupManager = await getSetupManager();\n  const state = setupManager.getState();\n  if (state.completed === true && !locals.authenticated)\n    return unauthorizedJson();\n  if (!state.completed && !isLocalRequest(request)) {\n    return json(403, { error: \"setup endpoints are restricted to local network access\" });\n  }\n  const secrets = readSecretsEnv();\n  const runtime = readRuntimeEnv();\n  const dataEnv = readDataEnv();\n  return json(200, {\n    ...state,\n    serviceInstances: {\n      openmemory: runtime.OPENMEMORY_URL ?? state.serviceInstances.openmemory ?? \"\",\n      psql: runtime.OPENMEMORY_POSTGRES_URL ?? state.serviceInstances.psql ?? \"\",\n      qdrant: runtime.OPENMEMORY_QDRANT_URL ?? state.serviceInstances.qdrant ?? \"\"\n    },\n    profile: {\n      name: dataEnv.OPENPALM_PROFILE_NAME ?? state.profile?.name ?? \"\",\n      email: dataEnv.OPENPALM_PROFILE_EMAIL ?? state.profile?.email ?? \"\"\n    },\n    openmemoryProvider: {\n      openaiBaseUrl: secrets.OPENAI_BASE_URL ?? \"\",\n      openaiApiKeyConfigured: Boolean(secrets.OPENAI_API_KEY)\n    },\n    smallModelProvider: {\n      endpoint: state.smallModel.endpoint,\n      modelId: state.smallModel.modelId,\n      apiKeyConfigured: Boolean(secrets.OPENPALM_SMALL_MODEL_API_KEY)\n    },\n    anthropicKeyConfigured: Boolean(secrets.ANTHROPIC_API_KEY),\n    firstBoot: setupManager.isFirstBoot()\n  });\n};\nexport {\n  GET\n};\n"],"names":[],"mappings":";;;;;;;;;;;;;;;AAIK,MAAC,GAAG,GAAG,OAAO,EAAE,MAAM,EAAE,OAAO,EAAE,KAAK;AAC3C,EAAE,MAAM,YAAY,GAAG,MAAM,eAAe,EAAE;AAC9C,EAAE,MAAM,KAAK,GAAG,YAAY,CAAC,QAAQ,EAAE;AACvC,EAAE,IAAI,KAAK,CAAC,SAAS,KAAK,IAAI,IAAI,CAAC,MAAM,CAAC,aAAa;AACvD,IAAI,OAAO,gBAAgB,EAAE;AAC7B,EAAE,IAAI,CAAC,KAAK,CAAC,SAAS,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC,EAAE;AACpD,IAAI,OAAO,IAAI,CAAC,GAAG,EAAE,EAAE,KAAK,EAAE,wDAAwD,EAAE,CAAC;AACzF,EAAE;AACF,EAAE,MAAM,OAAO,GAAG,cAAc,EAAE;AAClC,EAAE,MAAM,OAAO,GAAG,cAAc,EAAE;AAClC,EAAE,MAAM,OAAO,GAAG,WAAW,EAAE;AAC/B,EAAE,OAAO,IAAI,CAAC,GAAG,EAAE;AACnB,IAAI,GAAG,KAAK;AACZ,IAAI,gBAAgB,EAAE;AACtB,MAAM,UAAU,EAAE,OAAO,CAAC,cAAc,IAAI,KAAK,CAAC,gBAAgB,CAAC,UAAU,IAAI,EAAE;AACnF,MAAM,IAAI,EAAE,OAAO,CAAC,uBAAuB,IAAI,KAAK,CAAC,gBAAgB,CAAC,IAAI,IAAI,EAAE;AAChF,MAAM,MAAM,EAAE,OAAO,CAAC,qBAAqB,IAAI,KAAK,CAAC,gBAAgB,CAAC,MAAM,IAAI;AAChF,KAAK;AACL,IAAI,OAAO,EAAE;AACb,MAAM,IAAI,EAAE,OAAO,CAAC,qBAAqB,IAAI,KAAK,CAAC,OAAO,EAAE,IAAI,IAAI,EAAE;AACtE,MAAM,KAAK,EAAE,OAAO,CAAC,sBAAsB,IAAI,KAAK,CAAC,OAAO,EAAE,KAAK,IAAI;AACvE,KAAK;AACL,IAAI,kBAAkB,EAAE;AACxB,MAAM,aAAa,EAAE,OAAO,CAAC,eAAe,IAAI,EAAE;AAClD,MAAM,sBAAsB,EAAE,OAAO,CAAC,OAAO,CAAC,cAAc;AAC5D,KAAK;AACL,IAAI,kBAAkB,EAAE;AACxB,MAAM,QAAQ,EAAE,KAAK,CAAC,UAAU,CAAC,QAAQ;AACzC,MAAM,OAAO,EAAE,KAAK,CAAC,UAAU,CAAC,OAAO;AACvC,MAAM,gBAAgB,EAAE,OAAO,CAAC,OAAO,CAAC,4BAA4B;AACpE,KAAK;AACL,IAAI,sBAAsB,EAAE,OAAO,CAAC,OAAO,CAAC,iBAAiB,CAAC;AAC9D,IAAI,SAAS,EAAE,YAAY,CAAC,WAAW;AACvC,GAAG,CAAC;AACJ;;;;"}