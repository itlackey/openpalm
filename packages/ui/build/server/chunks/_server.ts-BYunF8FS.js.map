{"version":3,"file":"_server.ts-BYunF8FS.js","sources":["../../../.svelte-kit/adapter-node/entries/endpoints/secrets/raw/_server.ts.js"],"sourcesContent":["import { u as unauthorizedJson, j as json } from \"../../../../chunks/json.js\";\nimport { g as getStackManager } from \"../../../../chunks/init.js\";\nimport { d as readSecretsRaw, v as validateSecretsRawContent, w as writeSecretsRaw } from \"../../../../chunks/env-helpers.js\";\nconst GET = async ({ locals }) => {\n  if (!locals.authenticated) return unauthorizedJson();\n  const content = readSecretsRaw();\n  return new Response(content, {\n    headers: {\n      \"content-type\": \"text/plain\",\n      \"cache-control\": \"no-store, no-cache, must-revalidate\",\n      \"x-content-type-options\": \"nosniff\",\n      pragma: \"no-cache\"\n    }\n  });\n};\nconst POST = async ({ locals, request }) => {\n  if (!locals.authenticated) return unauthorizedJson();\n  const stackManager = await getStackManager();\n  const body = await request.json();\n  if (typeof body.content !== \"string\") return json(400, { error: \"content is required\" });\n  const validationError = validateSecretsRawContent(body.content);\n  if (validationError) return json(400, { error: validationError });\n  writeSecretsRaw(body.content);\n  stackManager.renderArtifacts();\n  return json(200, { ok: true });\n};\nexport {\n  GET,\n  POST\n};\n"],"names":[],"mappings":";;;;;;;;;;;;;AAGK,MAAC,GAAG,GAAG,OAAO,EAAE,MAAM,EAAE,KAAK;AAClC,EAAE,IAAI,CAAC,MAAM,CAAC,aAAa,EAAE,OAAO,gBAAgB,EAAE;AACtD,EAAE,MAAM,OAAO,GAAG,cAAc,EAAE;AAClC,EAAE,OAAO,IAAI,QAAQ,CAAC,OAAO,EAAE;AAC/B,IAAI,OAAO,EAAE;AACb,MAAM,cAAc,EAAE,YAAY;AAClC,MAAM,eAAe,EAAE,qCAAqC;AAC5D,MAAM,wBAAwB,EAAE,SAAS;AACzC,MAAM,MAAM,EAAE;AACd;AACA,GAAG,CAAC;AACJ;AACK,MAAC,IAAI,GAAG,OAAO,EAAE,MAAM,EAAE,OAAO,EAAE,KAAK;AAC5C,EAAE,IAAI,CAAC,MAAM,CAAC,aAAa,EAAE,OAAO,gBAAgB,EAAE;AACtD,EAAE,MAAM,YAAY,GAAG,MAAM,eAAe,EAAE;AAC9C,EAAE,MAAM,IAAI,GAAG,MAAM,OAAO,CAAC,IAAI,EAAE;AACnC,EAAE,IAAI,OAAO,IAAI,CAAC,OAAO,KAAK,QAAQ,EAAE,OAAO,IAAI,CAAC,GAAG,EAAE,EAAE,KAAK,EAAE,qBAAqB,EAAE,CAAC;AAC1F,EAAE,MAAM,eAAe,GAAG,yBAAyB,CAAC,IAAI,CAAC,OAAO,CAAC;AACjE,EAAE,IAAI,eAAe,EAAE,OAAO,IAAI,CAAC,GAAG,EAAE,EAAE,KAAK,EAAE,eAAe,EAAE,CAAC;AACnE,EAAE,eAAe,CAAC,IAAI,CAAC,OAAO,CAAC;AAC/B,EAAE,YAAY,CAAC,eAAe,EAAE;AAChC,EAAE,OAAO,IAAI,CAAC,GAAG,EAAE,EAAE,EAAE,EAAE,IAAI,EAAE,CAAC;AAChC;;;;"}