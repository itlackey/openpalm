{"version":3,"file":"runtime-env-BS_YlF-D.js","sources":["../../../.svelte-kit/adapter-node/chunks/runtime-env.js"],"sourcesContent":["function parseEnvLine(line, options = {}) {\n  const trimmed = line.trim();\n  if (!trimmed || trimmed.startsWith(\"#\") || !trimmed.includes(\"=\")) return null;\n  const [rawKey, ...rest] = trimmed.split(\"=\");\n  const key = rawKey.trim();\n  if (!key) return null;\n  let value = rest.join(\"=\").trim();\n  if (options.stripQuotedValues) {\n    if (value.startsWith('\"') && value.endsWith('\"') || value.startsWith(\"'\") && value.endsWith(\"'\")) {\n      value = value.slice(1, -1);\n    }\n  }\n  return [key, value];\n}\nfunction parseEnvContent(content, options = {}) {\n  const out = {};\n  for (const line of content.split(/\\r?\\n/)) {\n    const parsed = parseEnvLine(line, options);\n    if (!parsed) continue;\n    out[parsed[0]] = parsed[1];\n  }\n  return out;\n}\nconst RUNTIME_BIND_KEYS = {\n  OPENPALM_INGRESS_BIND_ADDRESS: true,\n  OPENPALM_OPENMEMORY_BIND_ADDRESS: true,\n  OPENPALM_OPENMEMORY_DASHBOARD_BIND_ADDRESS: true,\n  OPENPALM_ASSISTANT_BIND_ADDRESS: true,\n  OPENPALM_ASSISTANT_SSH_BIND_ADDRESS: true\n};\nfunction parseRuntimeEnvContent(content) {\n  return parseEnvContent(content);\n}\nfunction updateRuntimeEnvContent(content, entries) {\n  const lines = content.length > 0 ? content.split(/\\r?\\n/) : [];\n  const managedKeys = new Set(Object.keys(entries));\n  const next = [];\n  const seen = /* @__PURE__ */ new Set();\n  for (const line of lines) {\n    const parsed = parseEnvLine(line);\n    if (!parsed) {\n      next.push(line);\n      continue;\n    }\n    const [key] = parsed;\n    if (!managedKeys.has(key)) {\n      next.push(line);\n      continue;\n    }\n    seen.add(key);\n    const value = entries[key];\n    if (typeof value === \"string\" && value.length > 0) {\n      next.push(`${key}=${value}`);\n    }\n  }\n  for (const [key, value] of Object.entries(entries)) {\n    if (seen.has(key)) continue;\n    if (typeof value === \"string\" && value.length > 0) next.push(`${key}=${value}`);\n  }\n  return next.join(\"\\n\").replace(/\\n+$/, \"\") + \"\\n\";\n}\nfunction setRuntimeBindScopeContent(content, scope) {\n  const bindAddress = scope === \"host\" ? \"127.0.0.1\" : \"0.0.0.0\";\n  const entries = {\n    OPENPALM_INGRESS_BIND_ADDRESS: bindAddress,\n    OPENPALM_OPENMEMORY_BIND_ADDRESS: bindAddress,\n    OPENPALM_OPENMEMORY_DASHBOARD_BIND_ADDRESS: bindAddress,\n    OPENPALM_ASSISTANT_BIND_ADDRESS: bindAddress,\n    OPENPALM_ASSISTANT_SSH_BIND_ADDRESS: bindAddress\n  };\n  const lines = content.length > 0 ? content.split(/\\r?\\n/) : [];\n  const seen = /* @__PURE__ */ new Set();\n  const next = lines.map((line) => {\n    const parsed = parseEnvLine(line);\n    if (!parsed) return line;\n    const [key] = parsed;\n    if (key in RUNTIME_BIND_KEYS) {\n      seen.add(key);\n      return `${key}=${entries[key]}`;\n    }\n    return line;\n  });\n  for (const [key, value] of Object.entries(entries)) {\n    if (!seen.has(key)) next.push(`${key}=${value}`);\n  }\n  return next.join(\"\\n\").replace(/\\n+$/, \"\") + \"\\n\";\n}\nfunction sanitizeEnvScalar(value) {\n  if (typeof value !== \"string\") return \"\";\n  return value.replace(/[\\r\\n]+/g, \"\").trim();\n}\nexport {\n  setRuntimeBindScopeContent as a,\n  parseRuntimeEnvContent as p,\n  sanitizeEnvScalar as s,\n  updateRuntimeEnvContent as u\n};\n"],"names":[],"mappings":"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"}