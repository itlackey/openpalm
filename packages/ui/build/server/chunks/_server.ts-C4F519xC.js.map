{"version":3,"file":"_server.ts-C4F519xC.js","sources":["../../../.svelte-kit/adapter-node/entries/endpoints/state/_server.ts.js"],"sourcesContent":["import { u as unauthorizedJson, j as json } from \"../../../chunks/json.js\";\nimport { a as getSetupManager, g as getStackManager, l as log } from \"../../../chunks/init.js\";\nimport { d as discoverAllSnippets } from \"../../../chunks/snippet-discovery.js\";\nconst GET = async ({ locals }) => {\n  if (!locals.authenticated) return unauthorizedJson();\n  const setupManager = await getSetupManager();\n  const stackManager = await getStackManager();\n  let snippets = [];\n  try {\n    snippets = await discoverAllSnippets();\n  } catch (error) {\n    log.warn(\"Snippet discovery failed for /state\", { error: String(error) });\n    snippets = [];\n  }\n  return json(200, {\n    ok: true,\n    data: {\n      setup: setupManager.getState(),\n      spec: stackManager.getSpec(),\n      secrets: stackManager.listSecretManagerState(),\n      catalog: stackManager.listStackCatalogItems(snippets),\n      channels: stackManager.listChannelNames().map((name) => ({\n        name,\n        exposure: stackManager.getChannelAccess(name),\n        config: stackManager.getChannelConfig(name)\n      })),\n      services: stackManager.listServiceNames().map((name) => ({\n        name,\n        config: stackManager.getServiceConfig(name)\n      })),\n      automations: stackManager.listAutomations()\n    }\n  });\n};\nexport {\n  GET\n};\n"],"names":[],"mappings":";;;;;;;;;;;;;AAGK,MAAC,GAAG,GAAG,OAAO,EAAE,MAAM,EAAE,KAAK;AAClC,EAAE,IAAI,CAAC,MAAM,CAAC,aAAa,EAAE,OAAO,gBAAgB,EAAE;AACtD,EAAE,MAAM,YAAY,GAAG,MAAM,eAAe,EAAE;AAC9C,EAAE,MAAM,YAAY,GAAG,MAAM,eAAe,EAAE;AAC9C,EAAE,IAAI,QAAQ,GAAG,EAAE;AACnB,EAAE,IAAI;AACN,IAAI,QAAQ,GAAG,MAAM,mBAAmB,EAAE;AAC1C,EAAE,CAAC,CAAC,OAAO,KAAK,EAAE;AAClB,IAAI,GAAG,CAAC,IAAI,CAAC,qCAAqC,EAAE,EAAE,KAAK,EAAE,MAAM,CAAC,KAAK,CAAC,EAAE,CAAC;AAC7E,IAAI,QAAQ,GAAG,EAAE;AACjB,EAAE;AACF,EAAE,OAAO,IAAI,CAAC,GAAG,EAAE;AACnB,IAAI,EAAE,EAAE,IAAI;AACZ,IAAI,IAAI,EAAE;AACV,MAAM,KAAK,EAAE,YAAY,CAAC,QAAQ,EAAE;AACpC,MAAM,IAAI,EAAE,YAAY,CAAC,OAAO,EAAE;AAClC,MAAM,OAAO,EAAE,YAAY,CAAC,sBAAsB,EAAE;AACpD,MAAM,OAAO,EAAE,YAAY,CAAC,qBAAqB,CAAC,QAAQ,CAAC;AAC3D,MAAM,QAAQ,EAAE,YAAY,CAAC,gBAAgB,EAAE,CAAC,GAAG,CAAC,CAAC,IAAI,MAAM;AAC/D,QAAQ,IAAI;AACZ,QAAQ,QAAQ,EAAE,YAAY,CAAC,gBAAgB,CAAC,IAAI,CAAC;AACrD,QAAQ,MAAM,EAAE,YAAY,CAAC,gBAAgB,CAAC,IAAI;AAClD,OAAO,CAAC,CAAC;AACT,MAAM,QAAQ,EAAE,YAAY,CAAC,gBAAgB,EAAE,CAAC,GAAG,CAAC,CAAC,IAAI,MAAM;AAC/D,QAAQ,IAAI;AACZ,QAAQ,MAAM,EAAE,YAAY,CAAC,gBAAgB,CAAC,IAAI;AAClD,OAAO,CAAC,CAAC;AACT,MAAM,WAAW,EAAE,YAAY,CAAC,eAAe;AAC/C;AACA,GAAG,CAAC;AACJ;;;;"}