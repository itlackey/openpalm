{"version":3,"file":"_server.ts-Bu4YLfAY.js","sources":["../../../.svelte-kit/adapter-node/entries/endpoints/automations/history/_server.ts.js"],"sourcesContent":["import { u as unauthorizedJson, j as json } from \"../../../../chunks/json.js\";\nimport { g as getStackManager } from \"../../../../chunks/init.js\";\nimport { readHistory } from \"../../../../chunks/automation-history.js\";\nconst GET = async ({ locals, url }) => {\n  if (!locals.authenticated) return unauthorizedJson();\n  const id = (url.searchParams.get(\"id\") ?? \"\").trim();\n  const limitRaw = Number(url.searchParams.get(\"limit\") ?? \"20\");\n  const limit = Number.isInteger(limitRaw) && limitRaw > 0 && limitRaw <= 200 ? limitRaw : 20;\n  if (!id) return json(400, { error: \"id is required\" });\n  const stackManager = await getStackManager();\n  if (!stackManager.getAutomation(id)) return json(404, { error: \"automation not found\" });\n  return json(200, { id, logs: readHistory(id, limit) });\n};\nexport {\n  GET\n};\n"],"names":[],"mappings":";;;;;;;;;;;;AAGK,MAAC,GAAG,GAAG,OAAO,EAAE,MAAM,EAAE,GAAG,EAAE,KAAK;AACvC,EAAE,IAAI,CAAC,MAAM,CAAC,aAAa,EAAE,OAAO,gBAAgB,EAAE;AACtD,EAAE,MAAM,EAAE,GAAG,CAAC,GAAG,CAAC,YAAY,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,EAAE,EAAE,IAAI,EAAE;AACtD,EAAE,MAAM,QAAQ,GAAG,MAAM,CAAC,GAAG,CAAC,YAAY,CAAC,GAAG,CAAC,OAAO,CAAC,IAAI,IAAI,CAAC;AAChE,EAAE,MAAM,KAAK,GAAG,MAAM,CAAC,SAAS,CAAC,QAAQ,CAAC,IAAI,QAAQ,GAAG,CAAC,IAAI,QAAQ,IAAI,GAAG,GAAG,QAAQ,GAAG,EAAE;AAC7F,EAAE,IAAI,CAAC,EAAE,EAAE,OAAO,IAAI,CAAC,GAAG,EAAE,EAAE,KAAK,EAAE,gBAAgB,EAAE,CAAC;AACxD,EAAE,MAAM,YAAY,GAAG,MAAM,eAAe,EAAE;AAC9C,EAAE,IAAI,CAAC,YAAY,CAAC,aAAa,CAAC,EAAE,CAAC,EAAE,OAAO,IAAI,CAAC,GAAG,EAAE,EAAE,KAAK,EAAE,sBAAsB,EAAE,CAAC;AAC1F,EAAE,OAAO,IAAI,CAAC,GAAG,EAAE,EAAE,EAAE,EAAE,IAAI,EAAE,WAAW,CAAC,EAAE,EAAE,KAAK,CAAC,EAAE,CAAC;AACxD;;;;"}