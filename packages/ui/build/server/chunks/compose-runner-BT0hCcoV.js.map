{"version":3,"file":"compose-runner-BT0hCcoV.js","sources":["../../../.svelte-kit/adapter-node/chunks/compose-runner.js"],"sourcesContent":["if (typeof globalThis.Bun === \"undefined\") {\n  globalThis.Bun = {\n    env: typeof process !== \"undefined\" ? process.env : {},\n    spawn() {\n      throw new Error(\"Bun.spawn not available in Node\");\n    },\n    spawnSync() {\n      throw new Error(\"Bun.spawnSync not available in Node\");\n    }\n  };\n}\nconst transientErrorMatchers = [\n  { pattern: /Cannot connect to the Docker daemon|error during connect|dial unix/i, code: \"daemon_unreachable\", retryable: true },\n  { pattern: /pull access denied|manifest unknown|failed to fetch/i, code: \"image_pull_failed\", retryable: true },\n  { pattern: /permission denied|access denied/i, code: \"permission_denied\", retryable: false },\n  { pattern: /yaml:|invalid compose|unsupported config/i, code: \"invalid_compose\", retryable: false }\n];\nfunction classifyError(stderr) {\n  for (const matcher of transientErrorMatchers) {\n    if (matcher.pattern.test(stderr)) return { code: matcher.code, retryable: matcher.retryable };\n  }\n  return { code: \"unknown\", retryable: false };\n}\nfunction buildComposeArgs(options, args) {\n  const base = [];\n  if (options.subcommand) base.push(options.subcommand);\n  if (options.envFile) base.push(\"--env-file\", options.envFile);\n  base.push(\"-f\", options.composeFile);\n  return [...base, ...args];\n}\nasync function runComposeOnce(args, options) {\n  const composeArgs = buildComposeArgs(options, args);\n  const stream = options.stream ?? false;\n  const timeoutMs = options.timeoutMs ?? (stream ? 0 : 3e4);\n  const controller = timeoutMs > 0 ? new AbortController() : void 0;\n  const spawn = options.spawn ?? Bun.spawn;\n  const spawnOptions = {\n    stdout: stream ? \"inherit\" : \"pipe\",\n    stderr: stream ? \"inherit\" : \"pipe\",\n    stdin: \"inherit\",\n    cwd: options.cwd,\n    env: options.env ? { ...process.env, ...options.env } : process.env,\n    signal: controller?.signal\n  };\n  let timeoutId;\n  if (controller && timeoutMs > 0) {\n    timeoutId = setTimeout(() => controller.abort(\"timeout\"), timeoutMs);\n  }\n  let proc;\n  try {\n    proc = spawn([options.bin, ...composeArgs], spawnOptions);\n    await proc.exited;\n  } catch (error) {\n    if (timeoutId) clearTimeout(timeoutId);\n    const message = error instanceof Error ? error.message : String(error);\n    const isTimeout = controller?.signal.aborted === true || message.includes(\"timeout\");\n    const classified2 = classifyError(message);\n    const code = isTimeout ? \"timeout\" : classified2.code;\n    return { ok: false, exitCode: 1, stdout: \"\", stderr: message, code };\n  }\n  if (timeoutId) clearTimeout(timeoutId);\n  const exitCode = proc.exitCode ?? 1;\n  const stdoutStream = proc.stdout;\n  const stderrStream = proc.stderr;\n  const stdout = stream || typeof stdoutStream === \"number\" || !stdoutStream ? \"\" : await new Response(stdoutStream).text();\n  const stderr = stream || typeof stderrStream === \"number\" || !stderrStream ? \"\" : await new Response(stderrStream).text();\n  if (exitCode === 0) return { ok: true, exitCode, stdout, stderr, code: \"unknown\" };\n  const classified = classifyError(stderr);\n  return { ok: false, exitCode, stdout, stderr, code: classified.code };\n}\nasync function runCompose(args, options) {\n  const retries = options.retries ?? 2;\n  let attempt = 0;\n  while (true) {\n    const result = await runComposeOnce(args, options);\n    if (result.ok) return result;\n    if (result.code === \"timeout\") return result;\n    const classified = classifyError(result.stderr);\n    if (classified.code !== \"unknown\") result.code = classified.code;\n    if (!classified.retryable || attempt >= retries) return result;\n    attempt += 1;\n  }\n}\nconst CoreServices = [\n  \"assistant\",\n  \"gateway\",\n  \"openmemory\",\n  \"admin\",\n  \"caddy\",\n  \"openmemory-ui\",\n  \"postgres\",\n  \"qdrant\"\n];\nconst UiManagedServiceExclusions = [\"admin\", \"caddy\"];\nconst SetupStartupServices = CoreServices.filter((service) => service !== \"admin\");\nfunction envValue(name) {\n  const bunEnv = globalThis.Bun?.env;\n  return bunEnv?.[name] ?? process.env[name];\n}\nfunction composeProjectPath() {\n  return envValue(\"COMPOSE_PROJECT_PATH\") ?? \"/state\";\n}\nfunction composeBin() {\n  return envValue(\"OPENPALM_COMPOSE_BIN\") ?? \"docker\";\n}\nfunction composeSubcommand() {\n  return envValue(\"OPENPALM_COMPOSE_SUBCOMMAND\") ?? \"compose\";\n}\nfunction composeFilePath() {\n  return envValue(\"OPENPALM_COMPOSE_FILE\") ?? \"docker-compose.yml\";\n}\nfunction containerSocketUri() {\n  return envValue(\"OPENPALM_CONTAINER_SOCKET_URI\") ?? \"unix:///var/run/docker.sock\";\n}\nfunction extraServicesFromEnv() {\n  return (envValue(\"OPENPALM_EXTRA_SERVICES\") ?? \"\").split(\",\").map((value) => value.trim()).filter((value) => value.length > 0);\n}\nfunction createComposeRunner(envFile, spawn) {\n  const resolvedEnvFile = envFile ?? `${composeProjectPath()}/.env`;\n  const run = (args, composeFileOverride, stream) => execCompose(args, composeFileOverride, resolvedEnvFile, stream, spawn);\n  return {\n    action: (action, service) => runAction(run, action, service),\n    exec: (service, args) => runExec(run, service, args),\n    list: () => run([\"ps\", \"--format\", \"json\"]),\n    ps: () => runPs(run),\n    configServices: (composeFileOverride) => runConfigServices(run, composeFileOverride),\n    configValidate: () => run([\"config\"]),\n    configValidateForFile: (composeFile, envFileOverride) => execCompose([\"config\"], composeFile, envFileOverride ?? resolvedEnvFile, void 0, spawn),\n    pull: (service) => runPull(run, service),\n    logs: (service, tail) => runLogs(run, service, tail),\n    stackDown: () => run([\"down\", \"--remove-orphans\"], void 0, true)\n  };\n}\nfunction createMockRunner(overrides) {\n  const ok = { ok: true, stdout: \"\", stderr: \"\" };\n  return {\n    action: async () => ok,\n    exec: async () => ok,\n    list: async () => ({ ...ok, stdout: \"[]\" }),\n    ps: async () => ({ ok: true, services: [], stderr: \"\" }),\n    configServices: async () => [],\n    configValidate: async () => ok,\n    configValidateForFile: async () => ok,\n    pull: async () => ok,\n    logs: async () => ok,\n    stackDown: async () => ok,\n    ...overrides\n  };\n}\nasync function execCompose(args, composeFileOverride, envFile, stream, spawn) {\n  const composeFile = composeFileOverride ?? composeFilePath();\n  const result = await runCompose(args, {\n    bin: composeBin(),\n    subcommand: composeSubcommand(),\n    composeFile,\n    envFile,\n    cwd: composeProjectPath(),\n    env: {\n      DOCKER_HOST: containerSocketUri(),\n      CONTAINER_HOST: containerSocketUri()\n    },\n    stream,\n    spawn\n  });\n  return {\n    ok: result.ok,\n    stdout: result.stdout,\n    stderr: result.stderr,\n    exitCode: result.exitCode,\n    code: result.code\n  };\n}\nasync function ensureAllowedServices(run, services) {\n  const result = await run([\"config\", \"--services\"]);\n  const fromCompose = result.ok ? result.stdout.split(/\\r?\\n/).map((l) => l.trim()).filter((l) => l.length > 0) : [];\n  const allowed = /* @__PURE__ */ new Set([...CoreServices, ...extraServicesFromEnv(), ...fromCompose]);\n  for (const service of services) {\n    if (!allowed.has(service)) return service;\n  }\n  return null;\n}\nasync function runPs(run) {\n  const result = await run([\"ps\", \"--format\", \"json\"]);\n  if (!result.ok) return { ok: false, services: [], stderr: result.stderr };\n  const trimmed = result.stdout.trim();\n  if (trimmed.length === 0) return { ok: true, services: [], stderr: \"\" };\n  try {\n    const raw = JSON.parse(trimmed);\n    const services = raw.map((entry) => ({\n      name: String(entry.Service ?? entry.Name ?? \"\"),\n      status: String(entry.State ?? entry.Status ?? \"\"),\n      health: entry.Health ? String(entry.Health) : null\n    })).filter((entry) => entry.name.length > 0);\n    return { ok: true, services, stderr: \"\" };\n  } catch (error) {\n    const message = error instanceof Error ? error.message : String(error);\n    return { ok: false, services: [], stderr: `compose_ps_parse_failed:${message}` };\n  }\n}\nasync function runPull(run, service) {\n  if (service) {\n    const invalid = await ensureAllowedServices(run, [service]);\n    if (invalid) return { ok: false, stdout: \"\", stderr: \"service_not_allowed\" };\n    return run([\"pull\", service], void 0, true);\n  }\n  return run([\"pull\"], void 0, true);\n}\nasync function runLogs(run, service, tail = 200) {\n  const invalid = await ensureAllowedServices(run, [service]);\n  if (invalid) return { ok: false, stdout: \"\", stderr: \"service_not_allowed\" };\n  if (!composeLogsValidateTail(tail)) return { ok: false, stdout: \"\", stderr: \"invalid_tail\" };\n  return run([\"logs\", service, \"--tail\", String(tail)]);\n}\nasync function runAction(run, action, service) {\n  const services = Array.isArray(service) ? service : [service];\n  if (services.length === 0 && action !== \"up\") {\n    return { ok: false, stdout: \"\", stderr: \"service_not_allowed\" };\n  }\n  if (services.length === 0 && action === \"up\") {\n    return run([\"up\", \"-d\", \"--remove-orphans\"], void 0, true);\n  }\n  const invalid = await ensureAllowedServices(run, services);\n  if (invalid) return { ok: false, stdout: \"\", stderr: \"service_not_allowed\" };\n  if (action === \"up\") return run([\"up\", \"-d\", ...services], void 0, true);\n  if (action === \"stop\") return run([\"stop\", ...services], void 0, true);\n  return run([\"restart\", ...services], void 0, true);\n}\nasync function runConfigServices(run, composeFileOverride) {\n  const result = await run([\"config\", \"--services\"], composeFileOverride);\n  if (!result.ok) throw new Error(result.stderr || \"compose_config_services_failed\");\n  return result.stdout.split(/\\r?\\n/).map((line) => line.trim()).filter((line) => line.length > 0);\n}\nasync function runExec(run, service, args) {\n  if (!service) {\n    return run(args, void 0, false);\n  }\n  const invalid = await ensureAllowedServices(run, [service]);\n  if (invalid) return { ok: false, stdout: \"\", stderr: \"service_not_allowed\" };\n  return run([\"exec\", \"-T\", service, ...args], void 0, true);\n}\nasync function allowedServiceSet(runner) {\n  const r = runner ?? createComposeRunner();\n  const fromCompose = await r.configServices();\n  const declared = [...CoreServices, ...extraServicesFromEnv(), ...fromCompose];\n  return new Set(declared);\n}\nasync function composeConfigServices(composeFileOverride) {\n  return createComposeRunner().configServices(composeFileOverride);\n}\nasync function composeConfigValidate() {\n  return createComposeRunner().configValidate();\n}\nasync function composeConfigValidateForFile(composeFile, envFileOverride) {\n  return createComposeRunner().configValidateForFile(composeFile, envFileOverride);\n}\nasync function composeList() {\n  return createComposeRunner().list();\n}\nasync function composePs() {\n  return createComposeRunner().ps();\n}\nasync function composePull(service) {\n  return createComposeRunner().pull(service);\n}\nfunction composeLogsValidateTail(tail) {\n  return Number.isInteger(tail) && tail >= 1 && tail <= 5e3;\n}\nasync function composeLogs(service, tail) {\n  return createComposeRunner().logs(service, tail);\n}\nasync function composeServiceNames() {\n  return Array.from(await allowedServiceSet()).sort();\n}\nfunction filterUiManagedServices(services) {\n  const excluded = new Set(UiManagedServiceExclusions);\n  return services.filter((service) => !excluded.has(service));\n}\nasync function composeAction(action, service) {\n  return createComposeRunner().action(action, service);\n}\nasync function composeStackDown() {\n  return createComposeRunner().stackDown();\n}\nasync function composeExec(service, args) {\n  return createComposeRunner().exec(service, args);\n}\nexport {\n  CoreServices,\n  SetupStartupServices,\n  UiManagedServiceExclusions,\n  allowedServiceSet,\n  composeAction,\n  composeConfigServices,\n  composeConfigValidate,\n  composeConfigValidateForFile,\n  composeExec,\n  composeList,\n  composeLogs,\n  composeLogsValidateTail,\n  composePs,\n  composePull,\n  composeServiceNames,\n  composeStackDown,\n  createComposeRunner,\n  createMockRunner,\n  filterUiManagedServices\n};\n"],"names":[],"mappings":"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"}