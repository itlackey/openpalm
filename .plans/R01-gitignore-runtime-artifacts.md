# R1: Add Runtime Artifacts to `.gitignore`

## Summary

Ensure that test runtime artifacts generated by Playwright e2e tests -- specifically
`packages/ui/e2e/.e2e-state.json` and `packages/ui/e2e/screenshots/` -- are ignored by
git so they never get committed to the repository.

## Current State

### Existing `.gitignore` files

There are three `.gitignore` files in the repo:

| File | Relevance |
|------|-----------|
| `/.gitignore` (root, 107 lines) | General project ignores. Contains `admin/test-results/` and `admin/playwright-report/` but nothing for `packages/ui/e2e/` artifacts. |
| `/packages/ui/.gitignore` (26 lines) | **Already ignores `e2e/.e2e-state.json`** on line 26. Does NOT ignore `e2e/screenshots/`. |
| `/.opencode/.gitignore` (4 lines) | Unrelated (opencode tooling). |

### `packages/ui/e2e/.e2e-state.json`

- **Does NOT exist on disk** currently.
- **Already listed** in `packages/ui/.gitignore` at line 26 (`e2e/.e2e-state.json`).
- `git check-ignore` confirms the rule matches: the file would be ignored if created.
- **No action needed** for this file -- it is already handled.

### `packages/ui/e2e/screenshots/`

- **Exists on disk** with 3 PNG files (wizard-complete.png, wizard-complete-run3.png, wizard-complete-run3-health-check.png).
- **NOT tracked by git** -- `git ls-files` returns nothing for this path.
- **NOT ignored by git** -- `git check-ignore` returns no matching rule.
- The directory shows as "Untracked" in `git status`.
- **No commit history** exists for this directory (never been committed).

### Summary of Findings

The original recommendation assumed both artifacts were committed. In reality:

| Artifact | On disk? | Tracked by git? | In `.gitignore`? | Action needed? |
|----------|----------|-----------------|-------------------|----------------|
| `e2e/.e2e-state.json` | No | No | Yes (line 26 of `packages/ui/.gitignore`) | No |
| `e2e/screenshots/` | Yes (3 files) | No (untracked) | **No** | **Yes -- add ignore rule** |

The only action needed is adding `e2e/screenshots/` to `packages/ui/.gitignore`. No
`git rm` is required because the screenshots were never committed.

## Implementation Steps

### Step 1: Add `e2e/screenshots/` to `packages/ui/.gitignore`

**File to modify:** `/home/founder3/code/github/itlackey/openpalm/packages/ui/.gitignore`

Append the screenshots directory pattern after the existing `e2e/.e2e-state.json` line.

**Current content (lines 24-26):**
```
# Playwright
test-results
e2e/.e2e-state.json
```

**Updated content (lines 24-27):**
```
# Playwright
test-results
e2e/.e2e-state.json
e2e/screenshots/
```

This is the only file change required.

### Step 2: No files to delete from git

Since the screenshots directory was never committed (only present as untracked files on
disk), there is no need to run `git rm --cached`. The `.gitignore` rule alone is
sufficient to prevent future accidental commits.

The screenshot files on disk are local test artifacts and can remain (they will simply be
ignored). Developers may optionally delete them locally, but that is not part of this
change.

## Files to Modify

| File | Change |
|------|--------|
| `packages/ui/.gitignore` | Add `e2e/screenshots/` on line 27 (after line 26) |

## Files to Delete from Git

None. No tracked files need removal.

## Verification Steps

After making the change, run the following commands to confirm:

1. **Verify the ignore rule matches the screenshots directory:**
   ```bash
   git check-ignore -v packages/ui/e2e/screenshots/
   ```
   Expected output:
   ```
   packages/ui/.gitignore:27:e2e/screenshots/    packages/ui/e2e/screenshots/
   ```

2. **Verify individual screenshot files are ignored:**
   ```bash
   git check-ignore -v packages/ui/e2e/screenshots/wizard-complete.png
   ```
   Expected output should reference the `e2e/screenshots/` rule.

3. **Verify the `.e2e-state.json` rule still works:**
   ```bash
   git check-ignore -v packages/ui/e2e/.e2e-state.json
   ```
   Expected output should reference line 26.

4. **Verify screenshots no longer appear in `git status`:**
   ```bash
   git status -- packages/ui/e2e/
   ```
   Expected: no untracked files listed for the screenshots directory.

5. **Verify no tracked files were affected:**
   ```bash
   git ls-files -- packages/ui/e2e/screenshots/
   ```
   Expected: empty output (nothing tracked).

## Risk Assessment

**Risk: None.** This is a single-line addition to a `.gitignore` file. It affects only
untracked files and has no impact on builds, tests, or deployment. The change is fully
reversible by removing the added line.
